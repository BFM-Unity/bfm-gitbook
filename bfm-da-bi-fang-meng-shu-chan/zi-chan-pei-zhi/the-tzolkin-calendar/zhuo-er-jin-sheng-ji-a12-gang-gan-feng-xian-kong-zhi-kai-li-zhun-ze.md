# 卓尔金升级A12——杠杆风险控制，凯利准则

![](<../../../.gitbook/assets/比坊梦风险控制部 (1).png>) ![](../../../.gitbook/assets/FDB5B336C9DED9A993E8B15334BCF683.jpg)

## 〇

**波动率**σ是一定时间段内股价（股指）收益**率**的**标准差**，是衡量某一时间段内金融产品价格变动程度的数值。 如果一只股票预期拥有30%的**波动率**，那么该只股票在一年中，其价格有2/3的时间在当前价格30%的范围内上下浮动。

[https://zhuanlan.zhihu.com/p/85469506](https://zhuanlan.zhihu.com/p/85469506)

金融计算收益率的时候为什么大部分用对数收益率 (Log Return) 而不是用算数收益率？ - 石川的回答 - 知乎

{% embed url="https://www.zhihu.com/question/30113132/answer/431786548" %}

波动率(σ)就是收益**率**标准差(σ)

波动率的平方(σ^2)就是收益**率的**方差(σ^2)

不要和我玩文字游戏，我现在统一一下共识。

## 一

算数平均收益率(μ)，也即是对数收益率

ln(X\_T) = ln(X\_T/X\_0) 就是整个 T 期的对数收益率。**对数收益率的最大好处是它的可加性，把单期的对数收益率相加就得到整体的对数收益率。**

****

几何平均收益率 = 算数平均收益率(μ) - 0.5\*方差(σ^2)

调和平均收益率 = 算数平均收益率(μ) - 方差(σ^2)

## 二

设杠杆率为x

加杠杆的算数平均收益率 y\_0 = μ\*x

加杠杆的几何平均收益率 y\_1 = μ\*x - 0.5\*(σ^2)\*(x^2)

加杠杆的调和平均收益率 y\_2 = μ\*x - (σ^2)\*(x^2)

## 三

使得 y\_1 最大的杠杆率是 μ/(σ^2) , 使得 y\_1 归零的杠杆率是 2 \* μ/(σ^2),

使得 y\_2 最大的杠杆率是 0.5 \* μ/(σ^2) , 使得 y\_2 归零的杠杆率是 μ/(σ^2),

## 四

网格赚取的超额收益是算数平均收益率与调和平均收益率的差，

即为 (σ^2)\*(x^2)

屯币宝赚取的超额收益是算数平均收益率与几何平均收益率的差，

即为 0.5 \* (σ^2)\*(x^2)

## 五

说三个数，

0.35 以下是理性投资，

0.35 - 0.70 是感性投资，

0.70 - 1.50 是直觉投机，

1.50 以上是赌博，丧失人性。

这个杠杆率是通过夏普率和收益率算出来的。

超过 0.70，就不值得了。超过 1.40，准备亏损，超过 3.00，准备跳楼。

所以派网没有给大家更高的杠杆代币，还是有道理的。可能派网也模拟过了。

这个是我自己计算的结果，仅供参考，不构成投资建议，也不代表派网的观点。

## 六

如何实时计算推荐仓位？

未来可能会对卓尔金历法进行升级，用60天内的历史数据计算平均收益率和波动率

### 计算

一个周期内的平均收益率 μ = POWER(终值/初值,周期时段/(终时-初时))-1

一个周期内的平均波动率或标准差 σ = POWER(STDEV(各个收益率)+1,周期时段/(终时-初时))-1

一个周期内的推荐杠杆率 X = **** μ/(σ^2)

### 转换周期

(μ或σ) 切换周期 T\_1 到 T\_2 = POWER((μ或σ)+1 , 目标周期时段T\_2/原有周期时段T\_1) - 1

&#x20;X 切换周期 T\_1 到 T\_2 = **不能直接转换计算,需要先转换计算**μ和σ,再根据μ和σ重新计算X

### 设置滚动窗口选取区间

**滚动窗口不能直接选择数据，要新设滚动窗口，选择最后的编号，再根据编号选择数据**

### **六一**

经常在制作表格中需要在表头合计某些列的数额的合计，而有时候因为计算日期不同套用表格后要每次把表头上合计的金额重新指向某列的最后一行。

今天百度学到，在表格输入=LOOKUP(9E+307,A:A)。

即是取A列最后一个值，A:A是从A列到A列的意思，这里如果换成行标9:9就显示第9行最后一个数字，9E+307是Excel中的最大数值。

这样做Excel表把合计位置提前写入这个公式，无论下面计算的长短，上面标头合计处都是最后的数值。&#x20;

原文链接：https://blog.csdn.net/litongya/article/details/116723963

### 六二

在Excel中我们能够使用数组公式来找到行或列中的最后一个非空单元格。然后再此通过单元格的地址并使用INDIRECT函数就可以获取到此单元格的值。

excel 如何使用数组公式来找到行或列中的最后一个非空单元格&#x20;

### 取得一列中的最后一个非空行

1、接下来的公式可以返回A列中最后一个非空单元格的行号：

\=MAX((A：A<>"")\*(ROW(A：A)))

2、通过这个行号我们就可以使用ADDRESS函数来获取到此单元格的地址：

\=ADDRESS(MAX((A：A<>"")\*(ROW(A：A)))，COLUMN(A：A))

3、最后我们以此获取到的地址为基础使用INDIRECT函数就可以获取到此单元格的值

\=INDIRECT(ADDRESS(MAX((A：A<>"")\*(ROW(A：A)))，COLUMN(A：A)))

### 取得一行中的最后一个非空列

1、接下来的公式和上面取得非空行的公式原理是一样的，它可以返回第一行中最后一个非空单元格的列号：

\=MAX((1：1<>"")\*(COLUMN(1：1)))

2、同理通过这个列号我们就可以使用ADDRESS函数来获取到此单元格的地址：

\=ADDRESS(1，MAX((1：1<>"")\*COLUMN(1：1))，1)

3、最后我们以此获取到的地址为基础使用INDIRECT函数就可以获取到此单元格的值

\=INDIRECT(ADDRESS(3，MAX((3：3<>"")\*COLUMN(3：3))，1))

注意：以上公式都是数组公式，所以你必须使用CTRL+SHIFT+ENTER来输入这些公式

## 七

{% embed url="https://guhhhhaa.gitbook.io/joinquant/jin-rong-li-lun-zong-jie/zi-chan-pei-zhi" %}

![](<../../../.gitbook/assets/image (57).png>)

P\_0=1

M\_0=0

准备好M和C

M\_n=lg(P\_n/P\_(n-1))

C=POWER(Stdev(M)，2）或者=Stdevp(M)

最后F=M/C

矩阵函数是Excel中矩阵计算的专用模块。使用“插入”→“功能”命令打开“粘贴功能”对话框，如下所示。 　　在功能类别列中选择“数学和三角函数”。右栏中常用的矩阵函数是：

　　MDETERM：计算矩阵的行列式；

　　MINVERSE：计算矩阵的逆矩阵；

　　MMULT：计算两个矩阵的乘积；

　　SUMPRODUCT：计算所有矩阵的相应元素的乘积之和。

阵列计算和矩阵计算之间存在很大差异。例如，在下面的示例中，A和B都是明确定义的数组，因为两个数组都是3×3，输出也是3×3个单元。

　　在计算中，首先选择矩阵计算结果的输出字段，即3×3单元区域，然后输入公式。

　　如果输入“=A + B”或“=AB”，则计算结果是添加或减去数组的相应项。输入“=A \* B”表示数组A和B相乘，输入“=A/B”表示数组A被分割。数组B.

　　如果要进行矩阵计算，则需要使用相应的矩阵函数。矩阵加法和减法与数组的加法和减法表达式相同。它也是“=A + B”和“=AB”，这意味着矩阵乘法可以输入“=MMULT（A，B）”，矩阵除法是矩阵。 A乘以B的逆矩阵，因此计算公式为“=MMULT（A，MINVERSE（B））”。

　　输入公式后，按Shift + Ctrl + Enter以获得结果。

　　对于更复杂的矩阵计算，可以使用逐步计算。

EXCEL运用COVARIANCE.S计算协方差

COVAR函数用来计算协方差，即每对数据点的偏差乘积的平均数，利用协方差可以决定两个数据集之间的关系。例如，可利用它来检验受教育程度与收入档次之间的关系。COVAR函数的语法如下：

COVAR(array1,array2) 其中，array1参数为第1个所含数据为整数的单元格区域，Array2参数为第2个所含数据为整数的单元格区域。

[https://blog.csdn.net/duanyule\_cqu/article/details/54959897/](https://blog.csdn.net/duanyule\_cqu/article/details/54959897/)
